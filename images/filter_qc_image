FROM ubuntu
RUN apt-get update && apt-get install -y git build-essential zlib1g-dev libncurses5-dev libncursesw5-dev python-dev python-setuptools ant openjdk-7-jdk
RUN easy_install pip
RUN pip install common
RUN pip install python-dateutil
RUN mkdir image_software
RUN cd /image_software && git clone --branch 0.1.19 https://github.com/samtools/samtools.git
RUN cd /image_software && git clone --branch 1.92 https://github.com/broadinstitute/picard.git
RUN cd /image_software && git clone --branch v2.26.0 https://github.com/arq5x/bedtools2.git
RUN cd /image_software/samtools && make && cp /image_software/samtools/samtools /usr/local/bin/samtools
RUN cd /image_software/bedtools2 && make && cp -a /image_software/bedtools2/bin/. /usr/local/bin/
RUN cd /image_software/picard && ant -DJAVA_HOME=/usr/lib/jvm/java-6-openjdk-amd64/ -Ddist=/picard -lib lib/ant package-commands
RUN cd /image_software && git clone https://github.com/ENCODE-DCC/pipeline-container.git && cd /image_software/pipeline-container && git checkout dissection-idan
RUN cd /image_software/pipeline-container && git fetch && git pull

ENTRYPOINT ["python"]